dist: trusty
sudo: false  


addons:
  apt:
    packages:
    - python-numpy 
    - python-h5py
    - python-pandas
    - python-jsonschema
    - python-mpi4py
    - python-matplotlib
    - python-tk
    
language: python

python: 
  - "2.7"
  #- "3.2"

virtualenv:
    system_site_packages: true

install:
    
  # Install BMTK
  - python setup.py install 
  
  # Install OMV: framework for running automated tests on OSB using Travis-CI, see https://github.com/OpenSourceBrain/osb-model-validation
  - pip install git+https://github.com/OpenSourceBrain/osb-model-validation

script:  
  
  
  ######  Test running builder examples
  
  - cd docs/examples/builder/bionet_14cells
  - python build_network.py
  
  - cd ../bionet_multinetwork
  - python build_network.py
  
  - cd ../layer4_tests/
  #- python build_l4.py          #    No output and hangs
  #- python build_lgn.py         #    Throws an error...
  
  - cd ../popnet_2pops
  #- python build_network.py     #  Throws an error...
  
  - cd ../mpibuilder
  - python build_network.py 
  
  - cd ../pointnet_14cells
  #- python build_network.py     #  Throws an error...
  
  
  ######  Install NEURON using OMV & compile mod files
  
  - omv install NEURON
  - cd ../../simulator/bionet/components/mechanisms/
  - /home/travis/neuron/nrn/x86_64/bin/nrnivmodl modfiles
  
  
  ######  Test running simulator examples
  
  - cd ../../14cells
  - python run_bionet.py config.json 
  
  - cd ../../14cells_multinode
  - python run_bionet.py config.json 
  
  - cd ../../14cells_ecp
  - python run_bionet.py config.json 
  
  
  
  
  
  
